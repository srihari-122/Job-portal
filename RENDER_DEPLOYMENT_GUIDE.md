# 🚀 Render Deployment Guide - Job Portal Application

## 📋 Prerequisites

Before deploying to Render, ensure you have:
- ✅ A GitHub/GitLab account
- ✅ This project pushed to a Git repository
- ✅ A Render account (sign up at https://render.com)
- ✅ MongoDB database (use MongoDB Atlas for free tier)

---

## 🗄️ Step 1: Set Up MongoDB Database

### Option A: MongoDB Atlas (Recommended - Free)

1. Go to https://www.mongodb.com/cloud/atlas
2. Sign up or log in
3. Create a **FREE cluster**
4. Click "Connect" → "Connect your application"
5. Copy the connection string (it looks like):
   ```
   mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/job_portal?retryWrites=true&w=majority
   ```
6. **Save this connection string** - you'll need it for Render

### Option B: Render MongoDB (Paid)
1. In Render dashboard, create a new PostgreSQL or use external MongoDB

---

## 🔧 Step 2: Prepare Your Repository

1. **Ensure all files are committed to Git:**
   ```bash
   git add .
   git commit -m "Ready for Render deployment"
   git push origin main
   ```

2. **Verify these files exist in your repo:**
   - ✅ `render.yaml` (already configured)
   - ✅ `requirements.txt` (already configured)
   - ✅ `main.py` (your FastAPI app)
   - ✅ `config.py` (configuration)
   - ✅ All template files in `templates/`
   - ✅ All static files in `static/`

---

## 🌐 Step 3: Deploy to Render

### Method 1: Using render.yaml (Recommended)

1. **Go to Render Dashboard**
   - Visit https://dashboard.render.com

2. **Create New Web Service**
   - Click "New +" → "Blueprint"
   - Connect your GitHub/GitLab repository
   - Render will automatically detect `render.yaml`

3. **Configure Environment Variables**
   Click on your service → "Environment" tab → Add these variables:

   | Key | Value | Notes |
   |-----|-------|-------|
   | `DATABASE_URL` | Your MongoDB connection string | From Step 1 |
   | `DATABASE_NAME` | `job_portal` | Database name |
   | `SECRET_KEY` | Auto-generated | Render will generate this |
   | `DEBUG` | `false` | Production mode |
   | `PYTHON_VERSION` | `3.11` | Python version |
   | `ACCESS_TOKEN_EXPIRE_MINUTES` | `1440` | Token expiry (24 hours) |

4. **Deploy**
   - Click "Apply" or "Create Blueprint"
   - Render will start building your app
   - Wait 5-10 minutes for deployment

### Method 2: Manual Setup

1. **Create Web Service**
   - Go to Render Dashboard
   - Click "New +" → "Web Service"
   - Connect your repository

2. **Configure Settings:**
   - **Name:** `job-portal`
   - **Environment:** `Python 3`
   - **Region:** Choose closest to you
   - **Branch:** `main` (or your default branch)
   - **Build Command:**
     ```bash
     pip install -r requirements.txt && mkdir -p uploads static/css static/js templates
     ```
   - **Start Command:**
     ```bash
     uvicorn main:app --host 0.0.0.0 --port $PORT
     ```

3. **Add Environment Variables** (same as Method 1, table above)

4. **Deploy**
   - Click "Create Web Service"
   - Wait for deployment to complete

---

## 🔐 Step 4: Configure Environment Variables

After deployment, go to your service → **Environment** tab and verify/add:

```env
# Required Variables
DATABASE_URL=mongodb+srv://username:password@cluster.mongodb.net/job_portal
DATABASE_NAME=job_portal
SECRET_KEY=<auto-generated-by-render>
DEBUG=false

# Optional Variables
ACCESS_TOKEN_EXPIRE_MINUTES=1440
MAX_FILE_SIZE=10485760
LOG_LEVEL=INFO
RATE_LIMIT_PER_MINUTE=60
```

**Important:** 
- Replace `DATABASE_URL` with your actual MongoDB connection string
- Render will auto-generate `SECRET_KEY` - keep it secure!

---

## ✅ Step 5: Verify Deployment

1. **Check Build Logs**
   - Go to your service → "Logs" tab
   - Look for: "Application startup complete"
   - Ensure no errors

2. **Access Your Application**
   - Your app URL will be: `https://job-portal-xxxx.onrender.com`
   - Open it in your browser
   - Test login/register functionality

3. **Test Key Features:**
   - ✅ Homepage loads
   - ✅ Login/Register works
   - ✅ Admin dashboard accessible
   - ✅ Candidate dashboard works
   - ✅ File upload works
   - ✅ Job posting works

---

## 🔧 Step 6: Update API URLs (Important!)

After deployment, you need to update API URLs in your frontend:

1. **Open:** `static/js/app_new.js` (if exists)
2. **Replace all instances of:**
   ```javascript
   http://localhost:8005
   ```
   **With your Render URL:**
   ```javascript
   https://your-app-name.onrender.com
   ```

3. **Or use environment-based URLs:**
   ```javascript
   const API_URL = window.location.origin;
   ```

---

## 📊 Step 7: Monitor Your Application

### View Logs
```bash
# In Render Dashboard
Services → Your Service → Logs
```

### Check Metrics
```bash
# In Render Dashboard
Services → Your Service → Metrics
```

### Common Issues & Solutions

| Issue | Solution |
|-------|----------|
| **Build fails** | Check `requirements.txt` - all packages must be available |
| **App crashes** | Check logs for errors, verify MongoDB connection |
| **Can't connect to DB** | Verify MongoDB URL, check IP whitelist in Atlas |
| **Static files not loading** | Ensure `static/` folder exists in repo |
| **Upload fails** | Render free tier may have storage limits |

---

## 🆓 Render Free Tier Limitations

⚠️ **Be aware:**
- Apps spin down after 15 minutes of inactivity
- First request after sleep takes ~30 seconds
- 750 hours/month free (enough for 24/7 with 1 service)
- Limited storage for uploaded files
- No custom domains on free tier (can upgrade)

**Solutions:**
- Use external cron job to ping your app every 10 minutes
- Store uploaded files in cloud storage (AWS S3, Cloudinary)
- Upgrade to paid plan ($7/month) for always-on service

---

## 🔄 Continuous Deployment

Render automatically redeploys when you push to your repository:

```bash
# Make changes to your code
git add .
git commit -m "Updated feature"
git push origin main

# Render will automatically detect and redeploy
```

---

## 🛠️ Advanced Configuration

### Custom Domain (Paid Plans)
1. Go to Settings → Custom Domain
2. Add your domain
3. Update DNS records as instructed

### Health Checks
Add to `main.py`:
```python
@app.get("/health")
async def health_check():
    return {"status": "healthy"}
```

### Environment-Based Config
Update `config.py` to use environment variables properly (already done!)

---

## 📞 Support & Resources

- **Render Docs:** https://render.com/docs
- **MongoDB Atlas Docs:** https://docs.atlas.mongodb.com/
- **FastAPI Docs:** https://fastapi.tiangolo.com/

---

## 🎉 Deployment Checklist

Before going live, verify:

- [ ] MongoDB database is set up and accessible
- [ ] All environment variables are configured
- [ ] `render.yaml` is in repository root
- [ ] Application builds successfully
- [ ] Application starts without errors
- [ ] Homepage loads correctly
- [ ] Login/Register works
- [ ] Database operations work
- [ ] File uploads work (test with small files)
- [ ] All API endpoints respond
- [ ] Static files (CSS/JS) load
- [ ] Templates render correctly
- [ ] No sensitive data in code (use env vars)

---

## 🚨 Security Checklist

- [ ] `DEBUG=false` in production
- [ ] Strong `SECRET_KEY` (auto-generated by Render)
- [ ] MongoDB connection uses authentication
- [ ] MongoDB IP whitelist configured (0.0.0.0/0 for Render)
- [ ] No API keys in code
- [ ] HTTPS enabled (automatic on Render)
- [ ] File upload size limits set
- [ ] Rate limiting enabled

---

## 📝 Quick Deploy Commands

```bash
# 1. Push to GitHub
git add .
git commit -m "Deploy to Render"
git push origin main

# 2. In Render Dashboard
# - Connect repo
# - Select branch
# - Click "Deploy"

# 3. Done! 🎉
```

---

## 🎊 Congratulations!

Your Job Portal is now live on Render! 🚀

**Your App URL:** `https://your-app-name.onrender.com`

Share it with users and start connecting talent with opportunities! 💼✨

---

**Need Help?** 
- Check Render logs for errors
- Visit Render community forum
- Review this guide again

**Happy Deploying! 🎉**


